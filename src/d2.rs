//! <https://adventofcode.com/2021/day/2>

use std::str::FromStr;

const INPUT: [&str; 1000] = [
    "forward 6",
    "forward 9",
    "down 9",
    "down 7",
    "forward 8",
    "down 4",
    "forward 7",
    "forward 3",
    "up 5",
    "down 7",
    "down 3",
    "down 2",
    "down 1",
    "down 2",
    "down 1",
    "forward 5",
    "down 9",
    "up 7",
    "forward 6",
    "forward 3",
    "down 2",
    "forward 2",
    "down 4",
    "down 3",
    "forward 9",
    "up 4",
    "down 7",
    "forward 5",
    "down 4",
    "down 4",
    "forward 8",
    "up 6",
    "forward 4",
    "forward 6",
    "down 8",
    "forward 6",
    "up 9",
    "down 6",
    "down 8",
    "forward 7",
    "down 8",
    "up 1",
    "forward 5",
    "up 8",
    "forward 9",
    "down 7",
    "down 9",
    "up 3",
    "forward 9",
    "forward 7",
    "down 1",
    "down 5",
    "forward 6",
    "up 3",
    "down 2",
    "forward 8",
    "forward 5",
    "forward 9",
    "down 5",
    "down 5",
    "forward 7",
    "forward 9",
    "forward 8",
    "forward 9",
    "up 4",
    "up 8",
    "forward 2",
    "up 6",
    "forward 2",
    "down 8",
    "forward 4",
    "forward 6",
    "down 1",
    "forward 3",
    "down 7",
    "down 8",
    "forward 9",
    "forward 5",
    "down 8",
    "forward 1",
    "forward 8",
    "down 8",
    "up 1",
    "down 9",
    "forward 6",
    "down 1",
    "down 8",
    "up 6",
    "up 8",
    "down 7",
    "forward 8",
    "down 3",
    "forward 2",
    "up 2",
    "forward 1",
    "forward 7",
    "down 5",
    "down 7",
    "forward 5",
    "down 7",
    "forward 5",
    "forward 4",
    "up 8",
    "down 5",
    "forward 8",
    "forward 6",
    "up 4",
    "up 1",
    "down 1",
    "down 8",
    "down 1",
    "up 1",
    "down 4",
    "down 4",
    "up 3",
    "down 6",
    "forward 7",
    "up 8",
    "up 1",
    "forward 7",
    "forward 6",
    "down 9",
    "forward 3",
    "down 9",
    "down 5",
    "forward 5",
    "forward 1",
    "forward 5",
    "down 4",
    "forward 4",
    "up 5",
    "down 8",
    "down 2",
    "forward 2",
    "down 8",
    "up 4",
    "down 3",
    "forward 6",
    "up 7",
    "forward 2",
    "up 5",
    "up 9",
    "forward 6",
    "down 1",
    "down 1",
    "up 4",
    "down 7",
    "up 2",
    "forward 1",
    "down 5",
    "down 4",
    "down 5",
    "forward 4",
    "down 3",
    "up 8",
    "forward 7",
    "down 2",
    "up 6",
    "forward 4",
    "forward 8",
    "forward 8",
    "up 7",
    "down 2",
    "down 7",
    "down 9",
    "forward 8",
    "down 9",
    "down 5",
    "forward 8",
    "forward 6",
    "up 4",
    "up 7",
    "down 7",
    "forward 1",
    "up 2",
    "forward 1",
    "down 6",
    "down 1",
    "forward 9",
    "forward 8",
    "up 4",
    "forward 9",
    "up 7",
    "forward 8",
    "forward 1",
    "down 6",
    "up 3",
    "forward 2",
    "down 6",
    "up 3",
    "up 5",
    "forward 6",
    "up 5",
    "down 9",
    "forward 4",
    "up 5",
    "down 3",
    "forward 5",
    "forward 2",
    "up 6",
    "up 1",
    "up 4",
    "forward 9",
    "down 5",
    "up 2",
    "forward 9",
    "up 5",
    "down 6",
    "up 9",
    "down 6",
    "down 7",
    "forward 6",
    "forward 3",
    "down 2",
    "forward 3",
    "down 1",
    "down 9",
    "down 2",
    "down 2",
    "forward 8",
    "up 9",
    "forward 4",
    "forward 6",
    "forward 5",
    "forward 9",
    "forward 4",
    "up 6",
    "down 8",
    "down 8",
    "down 3",
    "forward 1",
    "forward 7",
    "up 3",
    "forward 2",
    "down 9",
    "up 7",
    "forward 5",
    "down 1",
    "forward 9",
    "up 8",
    "forward 7",
    "forward 1",
    "down 7",
    "forward 8",
    "down 7",
    "down 6",
    "forward 5",
    "forward 7",
    "up 9",
    "up 4",
    "forward 2",
    "down 1",
    "forward 3",
    "down 5",
    "forward 2",
    "forward 2",
    "forward 6",
    "up 1",
    "up 9",
    "down 1",
    "down 7",
    "up 6",
    "down 6",
    "down 7",
    "forward 3",
    "forward 7",
    "forward 9",
    "forward 9",
    "down 6",
    "down 8",
    "forward 9",
    "up 5",
    "forward 5",
    "down 6",
    "down 4",
    "forward 1",
    "up 9",
    "forward 6",
    "up 4",
    "up 7",
    "forward 5",
    "down 7",
    "down 6",
    "forward 2",
    "down 4",
    "forward 2",
    "down 1",
    "forward 8",
    "down 3",
    "down 8",
    "down 7",
    "down 6",
    "forward 3",
    "forward 1",
    "down 8",
    "up 4",
    "down 8",
    "forward 7",
    "down 2",
    "forward 3",
    "forward 2",
    "forward 4",
    "forward 2",
    "forward 8",
    "forward 2",
    "up 1",
    "down 6",
    "down 9",
    "down 3",
    "forward 8",
    "down 3",
    "forward 8",
    "forward 3",
    "forward 5",
    "down 6",
    "forward 6",
    "forward 2",
    "down 7",
    "forward 8",
    "down 1",
    "forward 7",
    "forward 6",
    "up 9",
    "forward 2",
    "up 4",
    "up 6",
    "forward 4",
    "forward 5",
    "forward 6",
    "forward 7",
    "down 4",
    "forward 9",
    "forward 1",
    "down 8",
    "down 5",
    "down 9",
    "up 5",
    "forward 9",
    "forward 6",
    "forward 7",
    "down 5",
    "forward 9",
    "down 4",
    "down 8",
    "forward 9",
    "down 5",
    "down 5",
    "down 6",
    "forward 8",
    "forward 9",
    "down 5",
    "down 7",
    "forward 8",
    "forward 5",
    "forward 9",
    "up 4",
    "down 3",
    "down 3",
    "forward 5",
    "down 7",
    "down 3",
    "up 7",
    "forward 6",
    "up 7",
    "down 9",
    "forward 6",
    "forward 8",
    "up 8",
    "down 9",
    "down 6",
    "up 3",
    "forward 6",
    "up 3",
    "down 4",
    "down 6",
    "forward 5",
    "down 5",
    "forward 1",
    "down 5",
    "forward 2",
    "up 3",
    "up 9",
    "down 9",
    "up 1",
    "down 3",
    "down 4",
    "forward 5",
    "up 4",
    "down 2",
    "forward 1",
    "forward 7",
    "up 9",
    "up 9",
    "down 2",
    "down 8",
    "forward 5",
    "down 4",
    "up 2",
    "forward 9",
    "down 3",
    "up 6",
    "down 3",
    "forward 1",
    "down 7",
    "down 7",
    "down 7",
    "forward 1",
    "forward 6",
    "down 5",
    "up 7",
    "forward 2",
    "up 6",
    "down 5",
    "up 3",
    "down 5",
    "up 1",
    "down 9",
    "up 2",
    "down 7",
    "up 5",
    "down 6",
    "up 1",
    "forward 5",
    "down 2",
    "down 1",
    "up 2",
    "forward 5",
    "forward 8",
    "up 7",
    "up 5",
    "forward 9",
    "forward 9",
    "forward 5",
    "forward 8",
    "down 4",
    "forward 8",
    "down 1",
    "up 3",
    "down 1",
    "down 9",
    "up 5",
    "down 7",
    "down 8",
    "down 4",
    "down 3",
    "forward 6",
    "down 5",
    "down 7",
    "forward 6",
    "down 3",
    "down 1",
    "down 5",
    "forward 4",
    "up 8",
    "down 6",
    "forward 1",
    "forward 1",
    "down 4",
    "down 8",
    "forward 9",
    "forward 3",
    "forward 6",
    "down 5",
    "down 7",
    "down 4",
    "up 1",
    "forward 2",
    "forward 4",
    "forward 8",
    "up 2",
    "up 9",
    "up 3",
    "down 8",
    "forward 4",
    "down 7",
    "forward 7",
    "down 5",
    "up 3",
    "up 6",
    "down 5",
    "forward 2",
    "down 8",
    "up 1",
    "down 4",
    "down 4",
    "forward 1",
    "down 6",
    "down 1",
    "up 2",
    "forward 2",
    "down 8",
    "down 7",
    "forward 5",
    "forward 2",
    "up 4",
    "forward 6",
    "down 4",
    "down 6",
    "down 2",
    "up 5",
    "down 5",
    "forward 7",
    "forward 2",
    "down 2",
    "down 7",
    "forward 1",
    "forward 1",
    "forward 4",
    "down 3",
    "forward 3",
    "up 4",
    "up 6",
    "down 3",
    "forward 4",
    "down 5",
    "down 6",
    "down 1",
    "forward 3",
    "up 3",
    "down 5",
    "down 5",
    "down 5",
    "forward 5",
    "forward 5",
    "forward 2",
    "up 3",
    "down 6",
    "down 6",
    "down 2",
    "down 5",
    "forward 3",
    "forward 9",
    "down 9",
    "forward 6",
    "up 4",
    "down 8",
    "up 7",
    "forward 1",
    "forward 4",
    "forward 9",
    "down 6",
    "up 1",
    "up 1",
    "up 4",
    "up 6",
    "forward 7",
    "down 5",
    "forward 8",
    "forward 7",
    "up 1",
    "up 6",
    "down 7",
    "down 8",
    "down 4",
    "down 8",
    "up 8",
    "down 7",
    "up 1",
    "forward 9",
    "forward 6",
    "forward 2",
    "forward 7",
    "down 9",
    "down 9",
    "down 7",
    "forward 4",
    "forward 8",
    "forward 8",
    "up 3",
    "down 7",
    "down 7",
    "down 3",
    "forward 5",
    "forward 3",
    "down 3",
    "down 6",
    "forward 2",
    "down 6",
    "up 7",
    "forward 2",
    "up 5",
    "down 7",
    "forward 4",
    "down 7",
    "forward 6",
    "up 6",
    "up 6",
    "forward 6",
    "forward 3",
    "up 1",
    "forward 2",
    "forward 6",
    "up 1",
    "down 9",
    "forward 8",
    "forward 6",
    "down 8",
    "down 3",
    "up 5",
    "forward 7",
    "forward 2",
    "up 4",
    "up 3",
    "forward 4",
    "down 3",
    "down 5",
    "down 5",
    "down 2",
    "down 7",
    "up 2",
    "down 2",
    "up 7",
    "down 1",
    "forward 6",
    "forward 5",
    "forward 4",
    "down 6",
    "down 1",
    "down 5",
    "down 6",
    "down 3",
    "down 9",
    "down 2",
    "down 7",
    "forward 7",
    "up 7",
    "down 3",
    "down 3",
    "forward 7",
    "up 5",
    "down 9",
    "forward 9",
    "down 2",
    "up 4",
    "up 9",
    "up 9",
    "down 1",
    "up 6",
    "down 1",
    "forward 7",
    "down 6",
    "forward 9",
    "down 9",
    "down 4",
    "down 1",
    "forward 6",
    "down 2",
    "forward 6",
    "up 8",
    "forward 1",
    "up 1",
    "up 5",
    "down 6",
    "down 8",
    "down 8",
    "forward 5",
    "forward 4",
    "forward 3",
    "up 8",
    "up 9",
    "down 4",
    "forward 4",
    "forward 4",
    "down 9",
    "forward 9",
    "down 7",
    "forward 7",
    "up 4",
    "forward 2",
    "down 8",
    "forward 1",
    "down 7",
    "forward 5",
    "forward 1",
    "down 8",
    "up 1",
    "up 1",
    "down 2",
    "down 4",
    "down 7",
    "down 3",
    "forward 7",
    "down 3",
    "up 3",
    "forward 8",
    "up 6",
    "forward 7",
    "forward 6",
    "down 1",
    "down 8",
    "forward 7",
    "up 1",
    "forward 2",
    "down 6",
    "down 1",
    "forward 4",
    "forward 2",
    "down 9",
    "up 8",
    "down 9",
    "down 2",
    "down 3",
    "down 5",
    "down 3",
    "down 8",
    "down 1",
    "down 1",
    "up 5",
    "forward 5",
    "down 2",
    "down 5",
    "down 5",
    "up 4",
    "up 5",
    "up 6",
    "up 7",
    "down 5",
    "forward 4",
    "up 6",
    "up 3",
    "down 5",
    "forward 9",
    "down 5",
    "down 3",
    "down 8",
    "forward 6",
    "forward 4",
    "forward 4",
    "forward 4",
    "forward 9",
    "forward 3",
    "up 3",
    "forward 7",
    "down 6",
    "down 7",
    "down 9",
    "down 5",
    "up 3",
    "forward 9",
    "forward 7",
    "forward 2",
    "down 4",
    "up 4",
    "down 7",
    "down 9",
    "down 6",
    "down 8",
    "forward 4",
    "forward 9",
    "down 4",
    "forward 9",
    "forward 3",
    "forward 9",
    "down 8",
    "forward 6",
    "down 6",
    "up 8",
    "forward 9",
    "forward 5",
    "forward 6",
    "down 5",
    "up 1",
    "forward 2",
    "up 5",
    "up 8",
    "down 7",
    "down 9",
    "forward 6",
    "forward 7",
    "forward 2",
    "down 8",
    "down 5",
    "forward 5",
    "down 6",
    "forward 2",
    "forward 7",
    "down 6",
    "up 5",
    "down 4",
    "down 7",
    "up 9",
    "up 4",
    "down 1",
    "forward 4",
    "up 6",
    "forward 2",
    "forward 8",
    "forward 9",
    "down 5",
    "forward 1",
    "forward 1",
    "down 6",
    "up 9",
    "forward 7",
    "down 9",
    "forward 4",
    "forward 2",
    "forward 6",
    "forward 6",
    "forward 7",
    "up 6",
    "down 8",
    "up 8",
    "down 7",
    "forward 6",
    "up 2",
    "forward 6",
    "down 1",
    "down 5",
    "down 6",
    "up 8",
    "forward 5",
    "up 5",
    "forward 1",
    "down 9",
    "down 1",
    "up 4",
    "down 2",
    "up 8",
    "up 2",
    "down 3",
    "up 4",
    "down 3",
    "up 5",
    "down 4",
    "down 2",
    "up 9",
    "forward 2",
    "forward 8",
    "down 5",
    "down 3",
    "forward 4",
    "forward 3",
    "forward 3",
    "down 6",
    "down 8",
    "forward 6",
    "down 1",
    "forward 6",
    "down 8",
    "down 7",
    "down 7",
    "forward 6",
    "forward 5",
    "up 8",
    "forward 7",
    "up 6",
    "down 7",
    "forward 7",
    "down 8",
    "down 8",
    "forward 7",
    "up 4",
    "forward 4",
    "forward 1",
    "up 1",
    "down 5",
    "up 6",
    "up 6",
    "up 7",
    "down 1",
    "down 2",
    "up 3",
    "down 3",
    "forward 6",
    "down 7",
    "down 9",
    "down 1",
    "forward 2",
    "forward 6",
    "down 9",
    "up 2",
    "forward 6",
    "up 7",
    "forward 5",
    "down 6",
    "down 5",
    "forward 2",
    "down 9",
    "forward 8",
    "up 7",
    "down 9",
    "down 7",
    "forward 8",
    "forward 7",
    "down 6",
    "down 7",
    "forward 1",
    "down 9",
    "up 6",
    "up 8",
    "down 4",
    "down 2",
    "down 4",
    "down 2",
    "down 5",
    "forward 9",
    "down 3",
    "forward 3",
    "forward 1",
    "down 2",
    "down 4",
    "down 1",
    "up 3",
    "up 7",
    "down 5",
    "down 8",
    "forward 6",
    "up 6",
    "down 2",
    "down 3",
    "forward 3",
    "up 4",
    "up 3",
    "down 6",
    "down 3",
    "forward 4",
    "forward 7",
    "forward 3",
    "up 7",
    "forward 3",
    "down 8",
    "forward 7",
    "down 3",
    "forward 8",
    "forward 2",
    "forward 4",
    "down 5",
    "forward 3",
    "down 8",
    "up 2",
    "forward 5",
    "up 7",
    "forward 2",
    "down 2",
    "down 5",
    "up 1",
    "up 7",
    "down 4",
    "up 9",
    "down 4",
    "forward 3",
    "forward 1",
    "up 9",
    "forward 1",
    "forward 3",
    "forward 1",
    "forward 5",
    "forward 2",
    "forward 6",
    "up 6",
    "down 1",
    "forward 1",
    "forward 6",
    "forward 6",
    "forward 5",
    "down 6",
    "forward 8",
    "down 4",
    "forward 3",
    "forward 4",
    "forward 1",
    "forward 9",
    "down 4",
    "forward 5",
    "down 2",
    "down 3",
    "forward 7",
    "forward 2",
    "forward 1",
    "forward 5",
    "down 9",
    "up 3",
    "up 7",
    "forward 3",
    "forward 2",
    "down 2",
    "up 7",
    "forward 9",
    "up 4",
    "up 2",
    "up 1",
    "down 5",
    "down 4",
    "forward 2",
    "down 6",
    "down 5",
    "down 6",
    "forward 6",
    "down 9",
    "down 1",
    "forward 2",
    "forward 7",
    "forward 4",
    "down 5",
    "down 6",
    "down 2",
    "forward 7",
    "down 3",
    "forward 5",
];

enum Command {
    Forward(u32),
    Down(u32),
    Up(u32),
}

impl FromStr for Command {
    type Err = String;

    fn from_str(s: &str) -> Result<Self, Self::Err> {
        let s_split: Vec<&str> = s.split_whitespace().collect();
        let command_name = s_split[0];
        let num_units: u32 = s_split[1].parse().unwrap();

        match command_name {
            "forward" => Ok(Command::Forward(num_units)),
            "down" => Ok(Command::Down(num_units)),
            "up" => Ok(Command::Up(num_units)),
            _ => Err(format!("Unknown command '{}'", command_name)),
        }
    }
}

pub fn solution_1() -> String {
    let commands = INPUT.iter().map(|&c| Command::from_str(c).unwrap());

    let (mut horizontal_position, mut depth) = (0, 0);
    for command in commands {
        match command {
            Command::Forward(num_units) => horizontal_position += num_units,
            Command::Down(num_units) => depth += num_units,
            Command::Up(num_units) => depth -= num_units,
        }
    }
    (horizontal_position * depth).to_string()
}

pub fn solution_2() -> String {
    String::from("TODO")
}
